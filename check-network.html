<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç½‘ç»œè¿æ¥æ£€æµ‹</title>
    <style>
        body {
            font-family: system-ui, -apple-system, sans-serif;
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .status {
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        .warning { background: #fff3cd; color: #856404; }
        .loading { background: #d1ecf1; color: #0c5460; }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover { background: #0056b3; }
        .info { font-size: 14px; color: #666; margin-top: 10px; }
    </style>
</head>
<body>
    <div class="card">
        <h1>ğŸŒ ç½‘ç»œè¿æ¥æ£€æµ‹</h1>
        <p>æ£€æµ‹ä½ çš„ç½‘ç»œæ˜¯å¦èƒ½è®¿é—® Vercel å’Œç›¸å…³æœåŠ¡</p>
        <button onclick="runTests()">å¼€å§‹æ£€æµ‹</button>
    </div>

    <div id="results"></div>

    <script>
        async function testConnection(url, name) {
            const startTime = Date.now();
            try {
                const response = await fetch(url, { 
                    mode: 'no-cors',
                    cache: 'no-cache'
                });
                const duration = Date.now() - startTime;
                return {
                    name,
                    success: true,
                    duration,
                    message: `âœ… è¿æ¥æˆåŠŸ (${duration}ms)`
                };
            } catch (error) {
                const duration = Date.now() - startTime;
                return {
                    name,
                    success: false,
                    duration,
                    message: `âŒ è¿æ¥å¤±è´¥: ${error.message}`
                };
            }
        }

        async function runTests() {
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = '<div class="card"><div class="status loading">â³ æ£€æµ‹ä¸­...</div></div>';

            const tests = [
                { url: 'https://personal-blog-swart-psi.vercel.app/', name: 'ä½ çš„ Vercel ç½‘ç«™' },
                { url: 'https://vercel.com', name: 'Vercel å®˜ç½‘' },
                { url: 'https://fonts.googleapis.com', name: 'Google Fonts' },
                { url: 'https://www.google.com', name: 'Google' },
                { url: 'https://www.baidu.com', name: 'ç™¾åº¦ï¼ˆå¯¹ç…§ç»„ï¼‰' },
            ];

            const results = [];
            for (const test of tests) {
                const result = await testConnection(test.url, test.name);
                results.push(result);
            }

            // æ˜¾ç¤ºç»“æœ
            let html = '<div class="card"><h2>æ£€æµ‹ç»“æœ</h2>';
            
            results.forEach(result => {
                const statusClass = result.success ? 'success' : 'error';
                html += `<div class="status ${statusClass}">
                    <strong>${result.name}</strong><br>
                    ${result.message}
                </div>`;
            });

            // åˆ†æç»“æœ
            const vercelFailed = !results[0].success;
            const googleFailed = !results[2].success || !results[3].success;
            const baiduSuccess = results[4].success;

            html += '<h3>ğŸ“Š åˆ†æ</h3>';
            
            if (vercelFailed && googleFailed && baiduSuccess) {
                html += `<div class="status warning">
                    <strong>âš ï¸ æ£€æµ‹åˆ°ç½‘ç»œé™åˆ¶</strong><br>
                    ä½ çš„ç½‘ç»œç¯å¢ƒå¯èƒ½é™åˆ¶äº†è®¿é—®æµ·å¤–æœåŠ¡ï¼ˆVercelã€Google ç­‰ï¼‰ã€‚<br>
                    <strong>å»ºè®®</strong>ï¼š
                    <ul>
                        <li>ä½¿ç”¨ VPN/æ¢¯å­è®¿é—®</li>
                        <li>æˆ–ç»‘å®šè‡ªå®šä¹‰åŸŸåå¹¶å¤‡æ¡ˆ</li>
                        <li>æˆ–éƒ¨ç½²åˆ°å›½å†…å¹³å°ï¼ˆZeaburã€é˜¿é‡Œäº‘ç­‰ï¼‰</li>
                    </ul>
                </div>`;
            } else if (vercelFailed) {
                html += `<div class="status error">
                    <strong>âŒ Vercel è®¿é—®å¤±è´¥</strong><br>
                    å¯èƒ½åŸå› ï¼š
                    <ul>
                        <li>ç½‘ç»œé™åˆ¶æˆ–é˜²ç«å¢™</li>
                        <li>DNS è§£æé—®é¢˜</li>
                        <li>è¿è¥å•†é™åˆ¶</li>
                    </ul>
                </div>`;
            } else {
                html += `<div class="status success">
                    <strong>âœ… ç½‘ç»œæ­£å¸¸</strong><br>
                    ä½ çš„ç½‘ç»œå¯ä»¥æ­£å¸¸è®¿é—® Vercel æœåŠ¡ã€‚
                </div>`;
            }

            html += `<div class="info">
                <strong>å½“å‰ç¯å¢ƒä¿¡æ¯ï¼š</strong><br>
                User Agent: ${navigator.userAgent}<br>
                åœ¨çº¿çŠ¶æ€: ${navigator.onLine ? 'åœ¨çº¿' : 'ç¦»çº¿'}<br>
                è¯­è¨€: ${navigator.language}<br>
                æ—¶é—´: ${new Date().toLocaleString('zh-CN')}
            </div>`;

            html += '</div>';
            resultsDiv.innerHTML = html;
        }
    </script>
</body>
</html>
